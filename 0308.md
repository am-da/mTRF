
## 修正前

### subject 2について

計測のエラー等ではなかった　　

表情特徴量がほとんどない　→  正確なmapが作られていない？　　

なぜshannel 32 だけが赤くなるのかはわからない　　

<details><summary>グラフ</summary>
   
 <br> 
 
movie 14 - feature - subject 2  　　

<img width="900" alt="スクリーンショット 2024-03-05 10 18 33" src="https://github.com/am-da/mTRF/assets/112613519/e416b911-3933-40b0-97c1-fa5d6e3aec09">
<img width="800" alt="スクリーンショット 2024-03-05 10 18 22" src="https://github.com/am-da/mTRF/assets/112613519/97ee550f-6afe-49de-8291-eb1a71c9d191">  
</details>
  
 <br>  



### 正規化について

brain and stimulus activityのグラフを表示する際は正規化していたが、topomap表示の際は正規化を行なっていなかった。

<details><summary>正規化グラフ</summary>
<img width="855" alt="スクリーンショット 2024-03-05 10 32 44" src="https://github.com/am-da/mTRF/assets/112613519/8750cfe7-4a12-491e-9747-d2bd940a331c">
</details>
  
 <br> 


### 脳波データ

<details><summary>subject 1</summary>

movie 1  
<img width="1000" alt="スクリーンショット 2024-03-05 13 37 36" src="https://github.com/am-da/mTRF/assets/112613519/e03c342c-abda-4ec1-b6ff-c4bcf727c3bf">
 <br> 

movie 3
<img width="1000" alt="スクリーンショット 2024-03-05 13 59 35" src="https://github.com/am-da/mTRF/assets/112613519/eb143e39-3435-4751-868b-5c84322cb568">
 <br> 

movie 4  
<img width="1000" alt="スクリーンショット 2024-03-05 13 43 20" src="https://github.com/am-da/mTRF/assets/112613519/e575248c-a096-4fe0-a96d-e8b5e067a23d">
<img width="1000" alt="スクリーンショット 2024-03-05 13 56 35" src="https://github.com/am-da/mTRF/assets/112613519/424818f6-5326-4647-b387-af2741b52aca">
 <br> 

movie 5  
<img width="1000" alt="スクリーンショット 2024-03-05 13 54 46" src="https://github.com/am-da/mTRF/assets/112613519/ecf810dd-48d0-47d9-8ff8-2a8972321531">
 <br> 


</details>

 <br> 



## 修正後

### 前処理

<details><summary>コード</summary>
   
```python
import mne

data_nums = range(1, 23)

for data_num in data_nums:
    print(data_num)
    raw = mne.io.read_raw_bdf(f'/Users/ami/PycharmProjects/UCSD_pycharm/UCSD/DEAP_data/data_original/s{data_num:02d}.bdf', preload=True)
    brain_channels = list(range(0, 32))
    raw_brain = raw.copy().pick_channels([raw.ch_names[i] for i in brain_channels])
    raw_brain.filter(1, 50, fir_design='firwin')
    raw_brain.resample(128)
    raw_brain.set_eeg_reference('average', projection=True)
    raw_brain.apply_proj()
    output_path = f'/Users/ami/PycharmProjects/UCSD_pycharm/UCSD/prepro_{data_num:02d}.fif'  # 保存先のファイルパスを指定
    raw_brain.save(output_path, overwrite=True)  # ファイルを上書き保存

```
</details>


<details><summary>movie 5の被験者平均のmap</summary>
   
修正前　　
   
   <img width="982" alt="スクリーンショット 2024-03-05 14 38 09" src="https://github.com/am-da/mTRF/assets/112613519/d612807b-9572-4938-bc35-f7dc8aa1ccea">

 <br> 



修正後 

<img width="828" alt="スクリーンショット 2024-03-05 14 38 34" src="https://github.com/am-da/mTRF/assets/112613519/14bb18f8-bc4b-422c-956b-500a7ecf72ff">
</details>





 <br> 

## ジャンル

<details><summary>movieのジャンル</summary>
  
last fmの感情タグを反映。それ以外は空白。  

| subject | last.fm tag |
|:---:|:---:|
| 1 | fun |
| 2 | exciting |
| 3 | joy |
| 11 | happy |
| 12 | cheerful |
| 13 | love |
| 14 | happy |
| 15 | lovely |
| 16 | sentimental |
| 22 | sentimental |
| 23 | melancholy |
| 24 | sad |
| 25 | depressing |
| 26 | mellow |
| 31 | terrible |
| 32 | shock |
| 33 | hate |

</details>










