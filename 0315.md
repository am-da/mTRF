




<details><summary>heatmapの値について</summary>

```Python

print("mean_coefs.shape", mean_coefs.shape)
print("mean_coefs",mean_coefs)

# 列の値を足し合わせる
summed_values = np.sum(mean_coefs, axis=1)

print("summed_values.shape",summed_values.shape)
print("summed_values",summed_values)
```
<img width="739" alt="スクリーンショット 2024-03-11 10 47 13" src="https://github.com/am-da/mTRF/assets/112613519/1eaccd12-4fbd-4689-b2af-1182569a97bb">
</details>

<br> 



## ICA  

・数値の設定の仕方は？  
・除くものの決め方は？  

```Python
ica = mne.preprocessing.ICA(n_components= 20, random_state= 10, max_iter=100)
```


<details><summary>mne.preprocessing.ICA</summary>

https://mne.tools/stable/generated/mne.preprocessing.ICA.html

### n_components
  ・float (0~1) : 各成分がデータセット内の分散（情報）のどれだけを説明できるか
  (例：3つの成分があり、最初の成分が70%、2番目が20%、3番目が残りの10%の分散を説明。ここで0.8を指定すると、説明される分散の80%に対応。この場合、最初の2つの成分が選択され、分散の90%が説明される。)  
  
  <img width="684" alt="スクリーンショット 2024-03-12 14 29 48" src="https://github.com/am-da/mTRF/assets/112613519/94bb23f2-9632-4b1b-851e-c5ea980a221c">

### random_state
アルゴリズムは最初にランダムな状態から始まる。　　
そのため、同じデータを使っても、異なる初期状態からスタートすると、異なる成分が見つかることがある。　　

これを防ぐために、random_stateという設定がある。　　
これを設定すると、アルゴリズムが使用するランダムな開始点が固定される。　　
つまり、同じrandom_stateを使うと、同じ成分が見つかる。　　
これにより、同じデータに対して常に同じ結果が得られ、研究の信頼性が高まりる。


</details>


 <br> 
 
<details><summary>EOGを使用</summary>

```Python


import mne

from mne.preprocessing import create_eog_epochs,create_ecg_epochs

#easycap_montage = mne.channels.make_standard_montage("biosemi32")

raw = mne.io.read_raw_bdf('/Users/ami/PycharmProjects/UCSD_pycharm/UCSD/DEAP_data/data_original/s01.bdf', preload=True)
# EOGチャンネル名を変更する
raw.rename_channels(mapping={'EXG1': 'EOG1', 'EXG2': 'EOG2'})
# 脳波のチャンネルのインデックスを指定
brain_channels = list(range(0, 34))

# 脳波のチャンネルのみを選択してデータを作成
raw_brain = raw.copy().pick_channels([raw.ch_names[i] for i in brain_channels])
# 33番目と34番目のチャンネルをEOGチャンネルとして登録
print(raw_brain.ch_names)

# デジタルフィルタリング
raw_brain.filter(1, 50, fir_design='firwin')

# ダウンサンプリング（128Hzにダウンサンプリング）
raw_brain.resample(128)

# 平均リファレンスを適用
raw_brain.set_eeg_reference('average', projection=True)
raw_brain.apply_proj()



# ICA

#raw_brain.set_montage(easycap_montage)
# set up and fit the ICA
ica = mne.preprocessing.ICA(n_components= 0.95, random_state = 23)
ica.fit(raw_brain, reject=dict(mag=4e-12, grad=4000e-13))
#ica.exclude = [1, 5]  # details on how we pick
#ica.plot_properties(raw, picks=range(0,4))

eog_epochs=create_eog_epochs(raw, ch_name= ['EOG1','EOG2'])
#eog_inds,scores=ica.find_bads_eog(eog_epochs)

#print(eog_inds)


# 変更
#start_time = 321.1542969
#end_time = start_time + 60

#raw_brain.crop(tmin=start_time, tmax=end_time)  # 指定した時間帯のデータを抽出
#raw_brain.plot()

```
<img width="909" alt="スクリーンショット 2024-03-12 13 25 57" src="https://github.com/am-da/mTRF/assets/112613519/96950e59-dec8-441f-b1d1-7a667bf1d302">

</details>




 <br> 
 
### 32以降のチャンネル

<img width="900" alt="スクリーンショット 2024-03-12 13 35 48" src="https://github.com/am-da/mTRF/assets/112613519/a1be7172-fe25-47b4-a52d-609c6f7ab722">









